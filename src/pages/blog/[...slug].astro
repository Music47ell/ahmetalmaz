---
import ContentLayout from "../../layouts/ContentLayout.astro";
import { fetchPublicPostBySlug } from "../../libs/fetchWP";
import { processPostContent } from "../../libs/processPost";

const { slug } = Astro.params;

const post = await fetchPublicPostBySlug(slug);

const content = await processPostContent(post.content.rendered);
---

<ContentLayout
  title={post.title.rendered}
  description={post.excerpt.rendered}
  published_at={post.date}
  lastModified={post.modified}
  readingTime={post.readingTime}
  wordsCount={post.wordCount}
  slug={post.slug}
>
  <div set:html={content} />
</ContentLayout>